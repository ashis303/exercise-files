name: Artifatcs_build
run-name: ${{ github.actor }} is deploying git action
on:
  push:
    branches:
      - "main"
      - "master/*"

env: 
  WorkflowLvlEnv: 'value of workflow lvl env variable'

jobs:
  jobOne:
    runs-on: ubuntu-latest
    steps:
      - name: step01
        uses: actions/checkout@v3

      - name: step02 List project files and java version
        run: |
              ls -ltr
              java -version
      
      - name: step03 Check out Apache Tomcat
        uses: actions/checkout@v3
        with:
          repository: apache/tomcat # Repository name with owner
          ref: main                 # The branch, tag or SHA to checkout
          path: ./tomcat            # Relative path under $GITHUB_WORKSPACE
      
      - name: step04 java install
        uses: actions/setup-java@v3
        with:
          java-version: '17'     # The JDK version to make available on the path
          java-package: jdk         # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64         # (x64 or x86) - defaults to x64
          distribution: 'zulu'

      - name: List project files and java version
        run: |
              ls -ltr
              java -version
      - name: copy file
        uses: canastro/copy-file-action@master
        with:
          source: "tomcat-users.xml"
          target: "./tomcat/conf/tomcat-users.xml"
      
#      - name: Copy tomcat-users.xml into Tomcat configuration directory
#        run: cp -v tomcat-users.xml ./tomcat/conf/tomcat-users.xml

      - name: buidl tomcat
        run: |
              cd ./tomcat
              ant

      - name: Azure login
        uses: azure/login@v1
        with:
          creds: ${{ secrets.SP_CSP_SECRET }}
      
      - name: Azure CLI script
        uses: azure/CLI@v1
        with:
          azcliversion: 2.30.0
          inlineScript: |
            az account show
            az storage -h
        





        


        
        



